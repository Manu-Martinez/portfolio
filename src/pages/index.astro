---
// src/pages/index.astro
import Layout from '../layouts/Layout.astro';
import Nav from '../components/nav/Nav.astro';
import ProjectCard from '../components/ProjectCard.astro';
import projects from "../projectsData";
import '../styles/global.css';
---




<Layout>
	<Nav></Nav>
  <section id="about" class="section">
    <div class="container">
      <h2>About Me</h2>
      <p>I'm a passionate web developer with expertise in HTML, CSS, JavaScript, and more. I love creating responsive, user-friendly websites that make an impact.</p>
    </div>
  </section>

  <section id="projects" class="section">
    <div class="container">
      <h2>Projects</h2>
      <div class="cards">
        {projects.map((project) => (
          <ProjectCard project={project}  />
        ))}
      </div>
    </div>
  </section>

  <section id="contact" class="section">
    <div class="container">
      <h2>Contact Me</h2>
      <p>Want to work together or just say hi? Feel free to get in touch!</p>
      <a href="mailto:john@example.com">Email</a>
      <a href="https://linkedin.com/in/johndoe">LinkedIn</a>
      <a href="https://github.com/johndoe">GitHub</a>
    </div>
  </section>
  
  <script>
	document.addEventListener('DOMContentLoaded', () => {
	  const nav = document.querySelector('nav');
	  const cards = document.querySelectorAll('.card');
	  const modals = document.querySelectorAll('.modal');
	  const closeButtons = document.querySelectorAll('.close');
	
	  const showNavbar = () => {
		if (nav) {
		  nav.style.display = 'block';
		}
	  };
	
	  const hideNavbar = () => {
		if (nav) {
		  nav.style.display = 'none';
		}
	  };
	
	  // Function to check if the click occurred inside any modal
	  const clickedInsideModal = (event) => {
		for (let modal of modals) {
		  if (modal.contains(event.target)) {
			return true;
		  }
		}
		return false;
	  };
	
	  // Event listener for clicks outside the modals and cards
	  document.addEventListener('click', (event) => {
		const clickedInsideCard = Array.from(cards).some(card => card.contains(event.target));
		const clickedInsideAnyModal = clickedInsideModal(event);
	
		if (!clickedInsideCard && !clickedInsideAnyModal) {
		  showNavbar(); // Show the navbar when clicking outside the cards and modals
		}
	  });
	
	  // Event listeners for each card
	  cards.forEach(card => {
		const closeButton = card.querySelector('.close');
	
		// Event listener for clicks inside the card (excluding the close button)
		card.addEventListener('click', (event) => {
		  if (!closeButton || event.target !== closeButton) {
			hideNavbar();
		  }
		});
	
		// Event listener for the close button inside the card
		if (closeButton) {
		  closeButton.addEventListener('click', (event) => {
			event.stopPropagation(); // Prevent the click event from propagating further
			showNavbar(); // Show the navbar when the close button is clicked
		  });
		}
	  });
	
	  // Event listener for clicks outside the opened modal
	  document.addEventListener('click', (event) => {
		if (event.target.classList.contains('modal') && event.target.style.display === 'block') {
		  showNavbar(); // Show the navbar when clicking outside the opened modal
		}
	  });
	
	});
	</script>
	
</Layout>