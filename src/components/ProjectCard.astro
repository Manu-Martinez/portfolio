---
const { project } = Astro.props;
---

<div class="card [ is-collapsed ]">
	<div class="card__inner [ js-expander ]">
	  <span>{project.name}</span>
	  <i class="fa fa-folder-o"></i>
	</div>
	<!-- Modal -->
	<div class="modal">
	  <div class="modal-content">
		<span class="close">&times;</span>
		<h2>{project.name}</h2>
		<br>
		<div class="tags">
			{project.tags || [].map((tag: string) => (
			  <span class="tag">{tag}</span>
			))}
		  </div>
		<br>
		<p>{project.description}</p>
		<img src={project.screenshot} alt={project.screenshot} />
		<div>
			<a href={project.html_url} target="_blank">{project.name}</a>
		</div>
	  </div>
	</div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const cells = document.querySelectorAll('.card');

    cells.forEach(cell => {
      const expander = cell.querySelector('.js-expander') as HTMLElement;
      const modal = cell.querySelector('.modal') as HTMLElement | null;
      const closeModal = cell.querySelector('.close') as HTMLElement | null;

      if (expander && modal && closeModal) {
        expander.addEventListener('click', function() {
          modal.style.display = "block";
        });

        closeModal.addEventListener('click', function() {
          modal.style.display = "none";
        });

        window.addEventListener('click', function(event) {
          if (event.target === modal) {
            modal.style.display = "none";
          }
        });
      }
    });
  });
</script>
